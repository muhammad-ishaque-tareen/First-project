<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Forecast</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
    }
    
    body {
        background-color: #fff;
        color: #333;
    }
    /* Navigation */
    
    nav {
        padding: 10px 6%;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .logo {
        display: flex;
        align-items: center;
    }
    
    .logo img {
        height: 50px;
        margin-right: 15px;
    }
    
    .logo h1 {
        font-size: 25px;
        background-color: #000000;
        background-clip: text;
    }
    
    .nav-links a {
        text-decoration: none;
        color: #000;
        font-size: 16px;
        padding: 6px 15px;
        border-radius: 5px;
        transition: background-color 0.3s;
    }
    
    .nav-links a:hover {
        background-color: #06a9e1;
        color: white;
    }
    /* Main Content */
    
    .hero {
        background-image: url('img/bg.jpg');
        background-size: cover;
        background-position: center;
        padding: 60px;
        text-align: center;
    }
    
    .hero h1 {
        font-size: 45px;
    }
    
    .hero p {
        font-size: 18px;
        margin-bottom: 30px;
    }
    
    .city-input {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-top: 20px;
    }
    
    .city-input input {
        padding: 10px 20px;
        width: 70%;
        font-size: 16px;
        border: 2px solid #06aae14f;
        border-radius: 35px;
        background-color: rgba(255, 255, 255, 0.605);
        transition: all 0.3s;
    }
    
    .city-input input:focus {
        border-color: #06a9e1;
        outline: none;
        box-shadow: 0 0 5px rgba(44, 100, 252, 0.5);
    }
    
    .city-input button {
        padding: 10px 20px;
        background-color: #06a9e1;
        color: white;
        border: none;
        border-radius: 35px;
        transition: all 0.3s;
    }
    
    .city-input button:hover {
        transform: scale(1.05);
    }
    
    .weather-container {
        width: 90%;
        margin: 40px auto;
        background-color: #f8f9fa;
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        display: grid;
        grid-template-columns: 300px 1fr;
        gap: 30px;
        transform: translateY(-20px);
        transition: all 0.3s ease;
    }
    
    .weather-main {
        padding: 20px;
        border-right: 2px solid #000000;
    }
    
    .weather-icon-large {
        font-size: 60px;
        margin-bottom: 20px;
        color: #ffc800;
    }
    
    .temperature-large {
        font-size: 5rem;
        font-weight: 500;
        margin-bottom: 10px;
        color: #333;
    }
    
    .weather-condition {
        font-size: 1.2rem;
        color: #666;
        margin-bottom: 20px;
    }
    
    .weather-date {
        color: #888;
        font-size: 0.9rem;
        margin-bottom: 5px;
    }
    
    .weather-location {
        font-size: 1.8rem;
        color: #333;
        margin-bottom: 20px;
    }
    
    .weather-details {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
        padding: 20px;
    }
    
    .weather-detail-card {
        background-color: #06a9e1;
        padding: 15px;
        border-radius: 15px;
        color: white;
    }
    
    .detail-title {
        font-size: 0.9rem;
        margin-bottom: 5px;
        opacity: 0.9;
    }
    
    .detail-value {
        font-size: 1.2rem;
        font-weight: 500;
    }
    
    .detail-unit {
        font-size: 0.8rem;
        opacity: 0.9;
    }
    
    .sun-moon-info {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-top: 15px;
    }
    
    .hidden {
        display: none;
    }
    /* Responsive Design */
    
    @media (max-width: 768px) {
        .weather-container {
            grid-template-columns: 1fr;
            text-align: center;
        }
        .weather-main {
            border-right: none;
            border-bottom: 1px solid #eee;
        }
        .weather-details {
            grid-template-columns: repeat(2, 1fr);
        }
    }
    
    @media (max-width: 480px) {
        .weather-details {
            grid-template-columns: 1fr;
        }
        .temperature-large {
            font-size: 4rem;
        }
        .weather-condition {
            font-size: 1rem;
        }
    }
    /* About Section */
    
    .features {
        padding: 4rem 2rem;
        text-align: center;
    }
    
    .features h2 {
        margin-bottom: 3rem;
    }
    
    .feature {
        display: inline-block;
        width: 250px;
        margin: 1rem;
        padding: 2rem;
        border-radius: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s;
    }
    
    .feature:hover {
        transform: scale(1.05);
    }
    
    .feature i {
        font-size: 3rem;
        color: #06a9e1;
        margin-bottom: 1rem;
    }
    /* About Section */
    
    .about {
        display: flex;
        padding: 4rem 2rem;
        background: #f9f9f9;
        justify-content: center;
        align-items: center;
        gap: 2rem;
    }
    
    .about-content {
        max-width: 600px;
    }
    
    .about img {
        max-width: 300px;
        border-radius: 20px;
    }
    /* Footer */
    
    footer {
        text-align: center;
        padding: 1.5rem;
        background: #f1f1f1;
    }
    
    .profile-section {
        position: relative;
        display: inline-block;
        margin-left: 20px;
    }
    
    .profile-icon {
        font-size: 2rem;
        color: #06a9e1;
        cursor: pointer;
        padding: 5px;
        border-radius: 50%;
        transition: all 0.5s ease;
    }
    
    .profile-icon:hover {
        transform: scale(1.25);
    }
    
    .profile-dropdown {
        position: absolute;
        top: 100%;
        right: 0;
        width: 250px;
        padding: 20px;
        background: white;
        border: 1px solid #eee;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        display: none;
        z-index: 1000;
    }
    
    .profile-section:hover .profile-dropdown {
        display: block;
    }
    
    .profile-dropdown p {
        margin: 10px 0;
        color: #333;
        font-size: 0.9rem;
    }
    
    .profile-dropdown form {
        margin: 15px 0;
    }
    
    .profile-dropdown input {
        width: 100%;
        padding: 8px;
        margin: 5px 0;
        border: 1px solid #ddd;
        border-radius: 5px;
    }
    
    .profile-dropdown input[type="submit"] {
        background-color: #06a9e1;
        color: white;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .profile-dropdown input[type="submit"]:hover {
        transform: scale(1.05);
    }
    
    .profile-dropdown a {
        display: block;
        padding: 8px;
        color: white;
        background: #06a9e1;
        text-decoration: none;
        text-align: center;
        border-radius: 5px;
        margin-top: 10px;
        transition: all 0.3s ease;
    }
    
    .profile-dropdown a:hover {
        transform: scale(1.05);
    }
</style>

<body>
    <nav>
        <div class="logo">
            <img src="img/weather02-512.webp" alt="logo" />
            <h1>Weather Cast</h1>
        </div>
        <div class="nav-links">
            <a href="dash.html">Home</a>
            <a href="#">Features</a>
            <a href="privacy.html">Privacy Policy</a>
            <a href="about.html">About US</a>
            <div class="profile-section">
                <div class="profile-icon">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="profile-dropdown">
                    <p><strong>Full Name:</strong> <span id="userFullName">Tayyab</span></p>
                    <p><strong>Username:</strong> <span id="username">Ishaque</span></p>

                    <form action="PasswordUpdateServlet" method="post">
                        <input type="password" name="currentPassword" placeholder="Current Password" required>
                        <input type="password" name="newPassword" placeholder="New Password" required>
                        <input type="password" name="confirmPassword" placeholder="Confirm New Password" required>
                        <input type="submit" value="Change Password">
                    </form>

                    <a href="logout" id="logoutBtn">Logout</a>
                </div>
            </div>

    </nav>
    <main>
        <div class="hero">
            <h1>Stay Ahead with Real-Time Weather Updates</h1>
            <p>Your trusted weather companion for accurate forecasts and more!</p>
            <form id="weather-form" class="city-input">
                <input type="text" id="city-input" placeholder="Enter City Name" required />
                <button type="button" id="search-button" class="btn">Get Weather</button>
            </form>
        </div>
    </main>
    <!-- Add this new section for weather results -->
    <div id="weather-container" class="weather-container hidden">
        <div class="weather-main">
            <div class="weather-icon-large">
                <i id="weather-icon" class="fas fa-cloud-sun"></i>
            </div>
            <div class="temperature-large">
                <span id="temp">31</span>°C
            </div>
            <div class="weather-condition" id="condition">Mostly Cloudy</div>
            <div class="weather-date" id="date">21 July 2023</div>
            <div class="weather-time">Friday, 12:44 PM</div>
            <div class="weather-location" id="location">Dhaka</div>
        </div>

        <div class="weather-details">
            <div class="weather-detail-card">
                <div class="detail-title">Wind</div>
                <div class="detail-value" id="wind">6 km/h</div>
                <div class="detail-unit">East</div>
            </div>
            <div class="weather-detail-card">
                <div class="detail-title">Humidity</div>
                <div class="detail-value" id="humidity">69%</div>
            </div>
            <div class="weather-detail-card">
                <div class="detail-title">Real Feel</div>
                <div class="detail-value" id="feels-like">31°C</div>
            </div>
            <div class="weather-detail-card">
                <div class="detail-title">UV Index</div>
                <div class="detail-value" id="uv-index">3</div>
                <div class="detail-unit">Moderate</div>
            </div>
            <div class="weather-detail-card">
                <div class="detail-title">Pressure</div>
                <div class="detail-value" id="pressure">1000 mb</div>
            </div>
            <div class="weather-detail-card">
                <div class="detail-title">Chance of rain</div>
                <div class="detail-value" id="rain-chance">70%</div>
            </div>

            <div class="weather-detail-card">
                <div class="detail-title">Temperature History</div>
                <div class="detail-value">31°C</div>
                <div class="detail-unit">31°C</div>
            </div>
            <div class="weather-detail-card">
                <div class="detail-title">Sun</div>
                <div class="detail-value">Rise 5:17 am</div>
                <div class="detail-unit">Set 5:17 pm</div>
            </div>
            <div class="weather-detail-card">
                <div class="detail-title">Moon</div>
                <div class="detail-value">Rise 5:17 am</div>
                <div class="detail-unit">Set 5:17 pm</div>
            </div>
        </div>
    </div>
    <section class="features">
        <h2>Our Features</h2>
        <div class="feature">
            <i class="fas fa-sun"></i>
            <h3>Real-Time Weather</h3>
            <p>Get accurate and up-to-date weather information.</p>
        </div>
        <div class="feature">
            <i class="fas fa-cloud-rain"></i>
            <h3>Hourly Forecast</h3>
            <p>Plan your day with hourly weather predictions.</p>
        </div>
        <div class="feature">
            <i class="fas fa-wind"></i>
            <h3>Wind & Humidity</h3>
            <p>Stay informed about wind speeds and humidity levels.</p>
        </div>
        <div class="feature">
            <i class="fas fa-map-marked-alt"></i>
            <h3>Global Coverage</h3>
            <p>Access weather updates for locations worldwide.</p>
        </div>
    </section>
    <section id="about" class="about">
        <div class="about-content">
            <h2>About Weather Cast</h2>
            <p>We are committed to providing accurate and timely weather updates to help you plan your day, week, or trip with ease. Our service combines advanced technology and an intuitive interface to deliver the best weather experience possible.</p>
            <p>Stay informed, stay safe, and explore weather conditions worldwide with ease using Weather Cast.</p>
        </div>
        <div>
            <img src="img/weather02-512.webp" alt="Weather illustration">
        </div>
    </section>

    <footer>
        <p>&copy; 2025 Weather Forecast. All rights reserved.</p>
    </footer>
    <script>
        async function checkSession() {
            try {
                const response = await fetch('SessionCheckServlet');
                const data = await response.json();

                if (!data.loggedIn) {
                    window.location.href = 'login.html';
                    return;
                }

                // Update profile information
                document.getElementById('userFullName').textContent = data.fullName;
                document.getElementById('username').textContent = data.username;
            } catch (error) {
                console.error('Session check failed:', error);
                window.location.href = 'login.html';
            }
        }

        // Check session when page loads
        document.addEventListener('DOMContentLoaded', function() {
            checkSession();
            // ... rest of your existing DOMContentLoaded code ...
        });
        document.addEventListener('DOMContentLoaded', function() {
            const apiUrl = "http://api.weatherstack.com/current";
            const accessKey = "786b37377ca796f53728b0c8030494f0";
            const weatherContainer = document.getElementById('weather-container');
            const searchButton = document.getElementById('search-button');
            const cityInput = document.getElementById('city-input');

            const updateWeatherUI = (data) => {
                // Update main weather display
                document.getElementById('temp').textContent = data.current.temperature;
                document.getElementById('condition').textContent = data.current.weather_descriptions[0];
                document.getElementById('location').textContent = data.location.name;

                // Update date and time
                const now = new Date();
                document.getElementById('date').textContent = now.toLocaleDateString('en-US', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });

                // Update weather details
                document.getElementById('wind').textContent = `${data.current.wind_speed} km/h`;
                document.getElementById('humidity').textContent = `${data.current.humidity}%`;
                document.getElementById('feels-like').textContent = `${data.current.feelslike}°C`;
                document.getElementById('pressure').textContent = `${data.current.pressure} mb`;

                // Update weather icon
                const weatherIcon = document.getElementById('weather-icon');
                weatherIcon.className = 'fas';
                if (data.current.weather_descriptions[0].toLowerCase().includes('cloud')) {
                    weatherIcon.classList.add('fa-cloud-sun');
                } else if (data.current.weather_descriptions[0].toLowerCase().includes('rain')) {
                    weatherIcon.classList.add('fa-cloud-rain');
                } else {
                    weatherIcon.classList.add('fa-sun');
                }

                weatherContainer.classList.remove('hidden');
                setTimeout(() => {
                    weatherContainer.classList.add('visible');
                }, 10);
            };

            const fetchWeather = async(city) => {
                try {
                    const response = await fetch(`${apiUrl}?access_key=${accessKey}&query=${city}`);
                    const data = await response.json();
                    if (data.error) {
                        alert('Error: ' + data.error.info);
                        return;
                    }
                    updateWeatherUI(data);
                } catch (error) {
                    alert('Error fetching weather data');
                }
            };

            searchButton.addEventListener('click', () => {
                const city = cityInput.value.trim();
                if (city) {
                    weatherContainer.classList.remove('visible');
                    setTimeout(() => {
                        fetchWeather(city);
                    }, 300);
                }
            });

            cityInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const city = cityInput.value.trim();
                    if (city) {
                        weatherContainer.classList.remove('visible');
                        setTimeout(() => {
                            fetchWeather(city);
                        }, 300);
                    }
                }
            });
        });
    </script>
</body>

</html>